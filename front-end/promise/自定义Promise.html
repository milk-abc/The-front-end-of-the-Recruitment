<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>自定义Promise</title>
  </head>
  <body>
    <script src="./lib/Promise_new.js"></script>
    <!-- <script>
      const p = new Promise((resolve, reject) => {
        setTimeout(() => {
          // resolve(1);
          reject(1);
          console.log("reject()改变状态之后");
        }, 100);
      });
      p.then(
        (value) => {
          console.log("onResolved1()", value);
        },
        (reason) => {
          console.log("onReject1()", reason);
        }
      );
      p.then(
        (value) => {
          console.log("onResolved2()", value);
        },
        (reason) => {
          console.log("onReject2()", reason);
        }
      ); -->
    <!-- <script>
      const p = new Promise((resolve, reject) => {
        setTimeout(() => {
          //resolve(1);
          reject(1);
        }, 100);
      })
        .then(
          (value) => {
            console.log("onResolved1()", value);
          },
          (reason) => {
            console.log("onReject1()", reason);
            return new Promise((resolve, reject) => reject(5));
          }
        )
        .then(
          (value) => {
            console.log("onResolved2()", value);
          },
          (reason) => {
            console.log("onReject2()", reason);
          }
        )
        .catch((reason) => {
          console.log("onReject3()", reason);
          return new Promise(() => {}); //中断promise链
        })
        .then(
          (value) => {
            console.log("onResolve4()", value);
          },
          (reason) => {
            console.log("onRejected4()", reason);
          }
        ); -->
    <script>
      const p1 = Promise.reject(2);
      const p2 = Promise.resolve(Promise.resolve(3));
      const p3 = Promise.resolve(Promise.reject(4));
      // p1.then((value) => {
      //   console.log("p1", value);
      // });
      // p2.then((value) => {
      //   console.log("p2", value);
      // });
      // p3.catch((reason) => {
      //   console.log("p3", reason);
      // });
      // const p4 = new Promise((resolve) => {
      //   setTimeout(() => {
      //     resolve(5);
      //   }, 1000);
      // });
      const p4 = Promise.resolveDelay(5, 1000);
      const pAll = Promise.all([p4, p2]);
      pAll.then(
        (values) => {
          console.log("onResolved", values);
        },
        (reason) => {
          console.log("onRejected", reason);
        }
      );
      // const pRace=Promise.race([p1,p2,p3]);
    </script>
  </body>
</html>
